<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–µ–º–µ–π–Ω—ã–π —á–∞—Ç | –ù–∞—à 2024</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —á–∞—Ç–∞ */
        .chat-page {
            background: linear-gradient(135deg, #0a2e38 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .back-to-calendar {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 255, 170, 0.1);
            color: #0fa;
            padding: 10px 20px;
            border-radius: 50px;
            text-decoration: none;
            margin-bottom: 30px;
            border: 2px solid #0fa;
            transition: all 0.3s ease;
        }
        
        .back-to-calendar:hover {
            background: #0fa;
            color: #0a2e38;
            transform: translateX(-5px);
        }
        
        .server-status {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-left: 15px;
        }
        
        .server-status.online {
            background: rgba(46, 204, 113, 0.2);
            color: #2ecc71;
            border: 1px solid #2ecc71;
        }
        
        .server-status.offline {
            background: rgba(231, 76, 60, 0.2);
            color: #e74c3c;
            border: 1px solid #e74c3c;
        }
        
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }
        
        .status-indicator.online {
            background: #2ecc71;
            box-shadow: 0 0 10px #2ecc71;
            animation: pulse 2s infinite;
        }
        
        .status-indicator.offline {
            background: #e74c3c;
        }
    </style>
</head>
<body class="chat-page">
    <div class="container">
        <!-- –®–∞–ø–∫–∞ -->
        <header>
            <a href="index.html" class="back-to-calendar">
                <i class="fas fa-arrow-left"></i>
                –ù–∞–∑–∞–¥ –∫ –∫–∞–ª–µ–Ω–¥–∞—Ä—é
            </a>
            <div class="server-status offline" id="serverStatus">
                <div class="status-indicator offline"></div>
                <span>–°–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω</span>
            </div>
        </header>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —á–∞—Ç–∞ -->
        <div class="chat-container-full">
            <div class="chat-header">
                <h1><i class="fas fa-comments"></i> –°–µ–º–µ–π–Ω—ã–π —á–∞—Ç</h1>
                <p class="chat-subtitle">–û–±—â–∞–π—Ç–µ—Å—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –≤—Å–µ–π —Å–µ–º—å—ë–π! üí¨</p>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–∞—Ç–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ JS -->
            <div id="chatApp"></div>
        </div>

        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è -->
        <div class="chat-instructions">
            <h3><i class="fas fa-info-circle"></i> –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —á–∞—Ç–æ–º:</h3>
            <ol>
                <li>–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ—ë –∏–º—è –∏–∑ —Å–ø–∏—Å–∫–∞ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ—ë</li>
                <li>–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –Ω–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"</li>
                <li>–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É–≤–∏–¥—è—Ç –≤—Å–µ —á–ª–µ–Ω—ã —Å–µ–º—å–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</li>
                <li>–ß—Ç–æ–±—ã —á–∞—Ç —Ä–∞–±–æ—Ç–∞–ª, —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω</li>
            </ol>
            <div class="server-info">
                <p><strong>–ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞:</strong> <code id="serverUrl">http://localhost:3000</code></p>
                <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span id="connectionStatus">–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...</span></p>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Socket.io –∫–ª–∏–µ–Ω—Ç–∞ -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <!-- –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å —á–∞—Ç–∞ -->
    <script src="js/family-chat-frontend.js"></script>
    
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
        function checkServerConnection() {
            const serverUrl = 'http://localhost:3000';
            
            fetch(`${serverUrl}/health`)
                .then(response => response.json())
                .then(data => {
                    const statusElement = document.getElementById('serverStatus');
                    const statusText = document.getElementById('connectionStatus');
                    
                    statusElement.className = 'server-status online';
                    statusElement.querySelector('.status-indicator').className = 'status-indicator online';
                    statusElement.querySelector('span').textContent = '–°–µ—Ä–≤–µ—Ä –æ–Ω–ª–∞–π–Ω';
                    statusText.textContent = '‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ —Å–µ—Ä–≤–µ—Ä—É —á–∞—Ç–∞';
                    
                    document.getElementById('serverUrl').textContent = serverUrl;
                })
                .catch(error => {
                    console.log('–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ');
                    document.getElementById('connectionStatus').innerHTML = 
                        '‚ùå –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω. <br><br>' +
                        '<strong>–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:</strong><br>' +
                        '1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ –ø–∞–ø–∫–µ <code>server</code><br>' +
                        '2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: <code>npm start</code><br>' +
                        '3. –û–±–Ω–æ–≤–∏—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É';
                });
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', checkServerConnection);
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
        setInterval(checkServerConnection, 10000);
    </script>
</body>
</html>